/**
 * octree-helper v0.17.0 build Thu Feb 28 2019
 * https://github.com/vanruesc/octree-helper
 * Copyright 2019 Raoul van RÃ¼schen, Zlib
 */
function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}(function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=b(require("three")):"function"==typeof define&&define.amd?define(["three"],b):(a=a||self,a.OCTREEHELPER=b(a.THREE))})(this,function(a){'use strict';function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&g(a,b)}function f(a){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},f(a)}function g(a,b){return g=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},g(a,b)}function h(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function i(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:h(a)}var j=function(c){function g(){var a,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return b(this,g),a=i(this,f(g).call(this)),a.name="OctreeHelper",a.octree=c,a.update(),a}return e(g,c),d(g,[{key:"createLineSegments",value:function(b,e){var h,m,o,p,q,r,s,t,u,v,w,x,y,z,A,B,f=Math.ceil,g=Math.pow,C=g(2,16)/8-1,D=new a.Group,E=new a.LineBasicMaterial({color:16777215*Math.random()});for(v=0,o=0,z=f(e/8191);0<z;--z){for(o+=8191>e?e:8191,e-=8191,m=8*o,p=new Uint16Array(3*m),q=new Float32Array(3*m),(x=0,y=0,h=b.next());!h.done&&v<o;){for(r=h.value,s=r.min,t=r.max,w=0;12>w;++w)B=l[w],p[y++]=x+B[0],p[y++]=x+B[1];for(w=0;8>w;++w,++x)A=k[w],q[3*x]=0===A[0]?s.x:t.x,q[3*x+1]=0===A[1]?s.y:t.y,q[3*x+2]=0===A[2]?s.z:t.z;++v<o&&(h=b.next())}u=new a.BufferGeometry,u.setIndex(new a.BufferAttribute(p,1)),u.addAttribute("position",new a.BufferAttribute(q,3)),D.add(new a.LineSegments(u,E))}this.add(D)}},{key:"update",value:function(){var a,b=null===this.octree?-1:this.octree.getDepth(),c=0;for(this.dispose();c<=b;)a=this.octree.findOctantsByLevel(c),this.createLineSegments(a[Symbol.iterator](),"number"==typeof a.size?a.size:a.length),++c}},{key:"dispose",value:function(){var a,b,c,d,e,f,g=this.children;for(c=0,e=g.length;c<e;++c){for(a=g[c],b=a.children,(d=0,f=b.length);d<f;++d)b[d].geometry.dispose(),b[d].material.dispose();for(;0<b.length;)a.remove(b[0])}for(;0<g.length;)this.remove(g[0])}}]),g}(a.Group),k=[new Uint8Array([0,0,0]),new Uint8Array([0,0,1]),new Uint8Array([0,1,0]),new Uint8Array([0,1,1]),new Uint8Array([1,0,0]),new Uint8Array([1,0,1]),new Uint8Array([1,1,0]),new Uint8Array([1,1,1])],l=[new Uint8Array([0,4]),new Uint8Array([1,5]),new Uint8Array([2,6]),new Uint8Array([3,7]),new Uint8Array([0,2]),new Uint8Array([1,3]),new Uint8Array([4,6]),new Uint8Array([5,7]),new Uint8Array([0,1]),new Uint8Array([2,3]),new Uint8Array([4,5]),new Uint8Array([6,7])];return j});
