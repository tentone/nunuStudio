/**
 * sparse-octree v5.2.0 build Mon Feb 11 2019
 * https://github.com/vanruesc/sparse-octree
 * Copyright 2019 Raoul van RÃ¼schen, Zlib
 */
function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,t(e.SPARSEOCTREE={}))})(this,function(e){"use strict";var R=Math.PI,D=Math.atan2,j=Math.round,L=Math.ceil,_=Math.floor,Q=Math.abs,I=Math.acos,N=Math.sqrt,U=Math.cos,G=Math.sin,H=Math.max,J=Math.min;function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a,n=0;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}function l(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return t&&("object"===_typeof(t)||"function"==typeof t)?t:d(e)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=i(e),null!==e););return e}function z(e,t,a){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=k(e,t);if(n){var l=Object.getOwnPropertyDescriptor(n,t);return l.get?l.get.call(a):l.value}},z(e,t,a||e)}function g(e){return h(e)||f(e)||S()}function h(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function f(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function S(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function w(e,t,a){return H(J(e,a),t)}function P(e,t,a,n,l,y){var i=0;return e>t&&e>a?(l<e&&(i|=2),y<e&&(i|=1)):t>a?(n<t&&(i|=4),y<t&&(i|=1)):(n<a&&(i|=4),l<a&&(i|=2)),i}function T(e,t,a,n){var l,y=0;return t<a?(l=t,y=0):(l=a,y=1),n<l&&(y=2),r[e][y]}function C(e,t,a,n,l,y,i,o,r){var s,u,d,c,x=e.children;if(0<=l&&0<=y&&0<=i)if(null===x)r.push(e);else{u=.5*(t+l),d=.5*(a+y),c=.5*(n+i),s=P(t,a,n,u,d,c);do 0===s?(C(x[Be],t,a,n,u,d,c,o,r),s=T(s,u,d,c)):1===s?(C(x[1^Be],t,a,c,u,d,i,o,r),s=T(s,u,d,i)):2===s?(C(x[2^Be],t,d,n,u,y,c,o,r),s=T(s,u,y,c)):3===s?(C(x[3^Be],t,d,c,u,y,i,o,r),s=T(s,u,y,i)):4===s?(C(x[4^Be],u,a,n,l,d,c,o,r),s=T(s,l,d,c)):5===s?(C(x[5^Be],u,a,c,l,d,i,o,r),s=T(s,l,d,i)):6===s?(C(x[6^Be],u,d,n,l,y,c,o,r),s=T(s,l,y,c)):7===s?(C(x[7^Be],u,d,c,l,y,i,o,r),s=8):void 0;while(8>s)}}function V(e){var t,a,n,y=e.children,o=0;if(null!==y)for(t=0,a=y.length;t<a;++t)n=1+V(y[t]),n>o&&(o=n);return o}function F(e,t,a){var n,y,o=e.children;if(Re.min=e.min,Re.max=e.max,t.intersectsBox(Re))if(null!==o)for(n=0,y=o.length;n<y;++n)F(o[n],t,a);else a.push(e)}function M(e,t,a,n){var y,o,r=e.children;if(a===t)n.push(e);else if(null!==r)for(++a,y=0,o=r.length;y<o;++y)M(r[y],t,a,n)}function A(e){var t,a,n=e.children,y=0;if(null!==n)for(t=0,a=n.length;t<a;++t)y+=A(n[t]);else null!==e.points&&(y=e.points.length);return y}function X(e,t,a,n,y){var o,r,s=n.children,u=!1,d=!1;if(n.contains(e,a.bias)){if(null===s){if(null===n.points)n.points=[],n.data=[];else for(o=0,r=n.points.length;!u&&o<r;++o)u=n.points[o].equals(e);u?(n.data[o-1]=t,d=!0):n.points.length<a.maxPoints||y===a.maxDepth?(n.points.push(e.clone()),n.data.push(t),++a.pointCount,d=!0):(n.split(),n.redistribute(a.bias),s=n.children)}if(null!==s)for(++y,o=0,r=s.length;!d&&o<r;++o)d=X(e,t,a,s[o],y)}return d}function Y(e,t,a,n){var y,o,r,s,u,d=a.children,c=null;if(a.contains(e,t.bias))if(null!==d)for(y=0,o=d.length;null===c&&y<o;++y)c=Y(e,t,d[y],a);else if(null!==a.points)for(r=a.points,s=a.data,(y=0,o=r.length);y<o;++y)if(r[y].equals(e)){u=o-1,c=s[y],y<u&&(r[y]=r[u],s[y]=s[u]),r.pop(),s.pop(),--t.pointCount,null!==n&&A(n)<=t.maxPoints&&n.merge();break}return c}function Z(e,t,a){var n,y,o,r=a.children,s=null;if(a.contains(e,t.bias))if(null!==r)for(n=0,y=r.length;null===s&&n<y;++n)s=Z(e,t,r[n]);else if(null!==a.points)for(o=a.points,n=0,y=o.length;null===s&&n<y;++n)e.equals(o[n])&&(s=a.data[n]);return s}function O(e,t,a,n,y,o){var r,s,u,d=n.children,c=null;if(n.contains(e,a.bias))if(!n.contains(t,a.bias))c=Y(e,a,n,y),X(t,c,a,y,o-1);else if(null!==d)for(++o,r=0,s=d.length;null===c&&r<s;++r)c=O(e,t,a,d[r],n,o);else if(null!==n.points)for(u=n.points,r=0,s=u.length;r<s;++r)if(e.equals(u[r])){u[r].copy(t),c=n.data[r];break}return c}function B(e,t,a,n){var y,o,r=null,s=t;if(null!==n.children){var u,d,c=n.children.map(function(t){return{octant:t,distance:t.distanceToCenterSquared(e)}}).sort(function(e,t){return e.distance-t.distance});for(y=0,o=c.length;y<o&&(u=c[y].octant,!(u.contains(e,s)&&(d=B(e,s,a,u),null!==d&&(s=d.distance,r=d,0===s))));++y);}else if(null!==n.points){var x,m=n.points,k=-1;for(y=0,o=m.length;y<o;++y)if(!m[y].equals(e))x=e.distanceTo(m[y]),x<s&&(s=x,k=y);else if(!a){s=0,k=y;break}0<=k&&(r={point:m[k],data:n.data[k],distance:s})}return r}function E(e,t,a,n,y){var o,r,s=n.children;if(null!==s){var u;for(o=0,r=s.length;o<r;++o)u=s[o],u.contains(e,t)&&E(e,t,a,u,y)}else if(null!==n.points){var d,c=n.points;for(o=0,r=c.length;o<r;++o)d=c[o],d.equals(e)?!a&&y.push({point:d.clone(),data:n.data[o]}):d.distanceToSquared(e)<=t*t&&y.push({point:d.clone(),data:n.data[o]})}}var K=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;t(this,e),this.x=a,this.y=n,this.z=l}return l(e,[{key:"set",value:function(e,t,a){return this.x=e,this.y=t,this.z=a,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"setFromSpherical",value:function(e){this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,a){var n=G(t)*e;return this.x=n*G(a),this.y=U(t)*e,this.z=n*U(a),this}},{key:"setFromCylindrical",value:function(e){this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,a){return this.x=e*G(t),this.y=a,this.z=e*U(t),this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=a,this.z=n,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.x/=e,this.y/=e,this.z/=e,this}},{key:"crossVectors",value:function(e,t){var a=e.x,n=e.y,l=e.z,y=t.x,i=t.y,o=t.z;return this.x=n*o-l*i,this.y=l*y-a*o,this.z=a*i-n*y,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"transformDirection",value:function(t){var a=this.x,n=this.y,l=this.z,y=t.elements;return this.x=y[0]*a+y[4]*n+y[8]*l,this.y=y[1]*a+y[5]*n+y[9]*l,this.z=y[2]*a+y[6]*n+y[10]*l,this.normalize()}},{key:"applyMatrix3",value:function(t){var a=this.x,n=this.y,l=this.z,y=t.elements;return this.x=y[0]*a+y[3]*n+y[6]*l,this.y=y[1]*a+y[4]*n+y[7]*l,this.z=y[2]*a+y[5]*n+y[8]*l,this}},{key:"applyMatrix4",value:function(t){var a=this.x,n=this.y,l=this.z,y=t.elements;return this.x=y[0]*a+y[4]*n+y[8]*l+y[12],this.y=y[1]*a+y[5]*n+y[9]*l+y[13],this.z=y[2]*a+y[6]*n+y[10]*l+y[14],this}},{key:"applyQuaternion",value:function(e){var t=this.x,a=this.y,n=this.z,l=e.x,y=e.y,i=e.z,o=e.w,r=o*t+y*n-i*a,s=o*a+i*t-l*n,u=o*n+l*a-y*t,d=-l*t-y*a-i*n;return this.x=r*o+d*-l+s*-i-u*-y,this.y=s*o+d*-y+u*-l-r*-i,this.z=u*o+d*-i+r*-y-s*-l,this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"reflect",value:function(e){var t=e.x,a=e.y,n=e.z;return this.sub(e.multiplyScalar(2*this.dot(e))),e.set(t,a,n),this}},{key:"angleTo",value:function(e){var t=this.dot(e)/N(this.lengthSquared()*e.lengthSquared());return I(J(H(t,-1),1))}},{key:"manhattanLength",value:function(){return Q(this.x)+Q(this.y)+Q(this.z)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return N(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanDistanceTo",value:function(e){return Q(this.x-e.x)+Q(this.y-e.y)+Q(this.z-e.z)}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,a=this.y-e.y,n=this.z-e.z;return t*t+a*a+n*n}},{key:"distanceTo",value:function(e){return N(this.distanceToSquared(e))}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"min",value:function(e){return this.x=J(this.x,e.x),this.y=J(this.y,e.y),this.z=J(this.z,e.z),this}},{key:"max",value:function(e){return this.x=H(this.x,e.x),this.y=H(this.y,e.y),this.z=H(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=H(e.x,J(t.x,this.x)),this.y=H(e.y,J(t.y,this.y)),this.z=H(e.z,J(t.z,this.z)),this}},{key:"floor",value:function(){return this.x=_(this.x),this.y=_(this.y),this.z=_(this.z),this}},{key:"ceil",value:function(){return this.x=L(this.x),this.y=L(this.y),this.z=L(this.z),this}},{key:"round",value:function(){return this.x=j(this.x),this.y=j(this.y),this.z=j(this.z),this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}}]),e}(),W=new K,o=[new K,new K,new K,new K,new K,new K,new K,new K],v=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K(1/0,1/0,1/0),n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new K(-Infinity,-Infinity,-Infinity);t(this,e),this.min=a,this.max=n}return l(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-Infinity,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"setFromSphere",value:function(e){return this.set(e.center,e.center),this.expandByScalar(e.radius),this}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"setFromPoints",value:function(e){var t,a;for(this.min.set(0,0,0),this.max.set(0,0,0),(t=0,a=e.length);t<a;++t)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var a=W.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}},{key:"clampPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new K;return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var t=W.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:"applyMatrix4",value:function(e){var t=this.min,a=this.max;return this.isEmpty()||(o[0].set(t.x,t.y,t.z).applyMatrix4(e),o[1].set(t.x,t.y,a.z).applyMatrix4(e),o[2].set(t.x,a.y,t.z).applyMatrix4(e),o[3].set(t.x,a.y,a.z).applyMatrix4(e),o[4].set(a.x,t.y,t.z).applyMatrix4(e),o[5].set(a.x,t.y,a.z).applyMatrix4(e),o[6].set(a.x,a.y,t.z).applyMatrix4(e),o[7].set(a.x,a.y,a.z).applyMatrix4(e),this.setFromPoints(o)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"containsPoint",value:function(e){var t=this.min,a=this.max;return e.x>=t.x&&e.y>=t.y&&e.z>=t.z&&e.x<=a.x&&e.y<=a.y&&e.z<=a.z}},{key:"containsBox",value:function(e){var t=this.min,a=this.max,n=e.min,l=e.max;return t.x<=n.x&&l.x<=a.x&&t.y<=n.y&&l.y<=a.y&&t.z<=n.z&&l.z<=a.z}},{key:"intersectsBox",value:function(e){var t=this.min,a=this.max,n=e.min,l=e.max;return l.x>=t.x&&l.y>=t.y&&l.z>=t.z&&n.x<=a.x&&n.y<=a.y&&n.z<=a.z}},{key:"intersectsSphere",value:function(e){var t=this.clampPoint(e.center,W);return t.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,a;return 0<e.normal.x?(t=e.normal.x*this.min.x,a=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,a=e.normal.x*this.min.x),0<e.normal.y?(t+=e.normal.y*this.min.y,a+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,a+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,a+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,a+=e.normal.z*this.min.z),t<=-e.constant&&a>=-e.constant}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),$=new v,ee=new K,te=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;t(this,e),this.center=a,this.radius=n}return l(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"setFromPoints",value:function(e){var t,a,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:$.setFromPoints(e).getCenter(this.center),y=0;for(t=0,a=e.length;t<a;++t)y=H(y,n.distanceToSquared(e[t]));return this.radius=N(y),this}},{key:"setFromBox",value:function(e){return e.getCenter(this.center),this.radius=.5*e.getSize(ee).length(),this}},{key:"isEmpty",value:function(){return 0>=this.radius}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"clampPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new K,a=this.center.distanceToSquared(e);return t.copy(e),a>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Q(e.distanceToPoint(this.center))<=this.radius}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}]),e}(),ae=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;t(this,e),this.x=a,this.y=n}return l(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.x/=e,this.y/=e,this}},{key:"applyMatrix3",value:function(t){var a=this.x,n=this.y,l=t.elements;return this.x=l[0]*a+l[3]*n+l[6],this.y=l[1]*a+l[4]*n+l[7],this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"manhattanLength",value:function(){return Q(this.x)+Q(this.y)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return N(this.x*this.x+this.y*this.y)}},{key:"manhattanDistanceTo",value:function(e){return Q(this.x-e.x)+Q(this.y-e.y)}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,a=this.y-e.y;return t*t+a*a}},{key:"distanceTo",value:function(e){return N(this.distanceToSquared(e))}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"min",value:function(e){return this.x=J(this.x,e.x),this.y=J(this.y,e.y),this}},{key:"max",value:function(e){return this.x=H(this.x,e.x),this.y=H(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=H(e.x,J(t.x,this.x)),this.y=H(e.y,J(t.y,this.y)),this}},{key:"floor",value:function(){return this.x=_(this.x),this.y=_(this.y),this}},{key:"ceil",value:function(){return this.x=L(this.x),this.y=L(this.y),this}},{key:"round",value:function(){return this.x=j(this.x),this.y=j(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"angle",value:function e(){var e=D(this.y,this.x);return 0>e&&(e+=2*R),e}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:"rotateAround",value:function(e,t){var a=U(t),n=G(t),l=this.x-e.x,i=this.y-e.y;return this.x=l*a-i*n+e.x,this.y=l*n+i*a+e.y,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"width",get:function(){return this.x},set:function(e){return this.x=e}},{key:"height",get:function(){return this.y},set:function(e){return this.y=e}}]),e}(),ne=new ae,le=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new ae(1/0,1/0),n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new ae(-Infinity,-Infinity);t(this,e),this.min=a,this.max=n}return l(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-Infinity,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new ae;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new ae;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"getBoundingSphere",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new te;return this.getCenter(e.center),e.radius=.5*this.getSize(ne).length(),e}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"setFromPoints",value:function(e){var t,a;for(this.min.set(0,0),this.max.set(0,0),(t=0,a=e.length);t<a;++t)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var a=ne.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}},{key:"clampPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new ae;return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var t=ne.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"containsPoint",value:function(e){var t=this.min,a=this.max;return e.x>=t.x&&e.y>=t.y&&e.x<=a.x&&e.y<=a.y}},{key:"containsBox",value:function(e){var t=this.min,a=this.max,n=e.min,l=e.max;return t.x<=n.x&&l.x<=a.x&&t.y<=n.y&&l.y<=a.y}},{key:"intersectsBox",value:function(e){var t=this.min,a=this.max,n=e.min,l=e.max;return l.x>=t.x&&l.y>=t.y&&n.x<=a.x&&n.y<=a.y}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),ye=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;t(this,e),this.radius=a,this.theta=n,this.y=l}return l(e,[{key:"set",value:function(e,t,a){return this.radius=e,this.theta=t,this.y=a,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,a){return this.radius=N(e*e+a*a),this.theta=D(e,a),this.y=t,this}}]),e}(),ie=function(){function e(){t(this,e),this.elements=new Float32Array([1,0,0,0,1,0,0,0,1])}return l(e,[{key:"set",value:function(e,t,a,n,l,y,i,o,r){var s=this.elements;return s[0]=e,s[3]=t,s[6]=a,s[1]=n,s[4]=l,s[7]=y,s[2]=i,s[5]=o,s[8]=r,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=e.elements,a=this.elements;return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],this}},{key:"clone",value:function(){return new this.constructor().fromArray(this.elements)}},{key:"fromArray",value:function(e){var t,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;for(t=0;9>t;++t)n[t]=e[t+a];return this}},{key:"toArray",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;for(e=0;9>e;++e)t[e+a]=n[e];return t}},{key:"multiplyMatrices",value:function(e,t){var a=e.elements,n=t.elements,l=this.elements,y=a[0],i=a[3],o=a[6],r=a[1],s=a[4],u=a[7],d=a[2],c=a[5],x=a[8],m=n[0],k=n[3],v=n[6],p=n[1],z=n[4],g=n[7],h=n[2],f=n[5],S=n[8];return l[0]=y*m+i*p+o*h,l[3]=y*k+i*z+o*f,l[6]=y*v+i*g+o*S,l[1]=r*m+s*p+u*h,l[4]=r*k+s*z+u*f,l[7]=r*v+s*g+u*S,l[2]=d*m+c*p+x*h,l[5]=d*k+c*z+x*f,l[8]=d*v+c*g+x*S,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var t=this.elements,n=t[0],a=t[1],l=t[2],y=t[3],o=t[4],e=t[5],r=t[6],s=t[7],u=t[8];return n*o*u-n*e*s-a*y*u+a*e*r+l*y*s-l*o*r}},{key:"getInverse",value:function(e){var t,a=e.elements,n=this.elements,l=a[0],y=a[1],i=a[2],o=a[3],r=a[4],s=a[5],u=a[6],d=a[7],c=a[8],x=c*r-s*d,m=s*u-c*o,k=d*o-r*u,v=l*x+y*m+i*k;return 0===v?(console.error("Can't invert matrix, determinant is zero",e),this.identity()):(t=1/v,n[0]=x*t,n[1]=(i*d-c*y)*t,n[2]=(s*y-i*r)*t,n[3]=m*t,n[4]=(c*l-i*u)*t,n[5]=(i*o-s*l)*t,n[6]=k*t,n[7]=(y*u-d*l)*t,n[8]=(r*l-y*o)*t),this}},{key:"transpose",value:function(){var e,a=this.elements;return e=a[1],a[1]=a[3],a[3]=e,e=a[2],a[2]=a[6],a[6]=e,e=a[5],a[5]=a[7],a[7]=e,this}},{key:"scale",value:function(e,t){var a=this.elements;return a[0]*=e,a[3]*=e,a[6]*=e,a[1]*=t,a[4]*=t,a[7]*=t,this}},{key:"rotate",value:function(e){var t=U(e),a=G(e),n=this.elements,l=n[0],y=n[3],i=n[6],o=n[1],r=n[4],s=n[7];return n[0]=t*l+a*o,n[3]=t*y+a*r,n[6]=t*i+a*s,n[1]=-a*l+t*o,n[4]=-a*y+t*r,n[7]=-a*i+t*s,this}},{key:"translate",value:function(e,t){var a=this.elements;return a[0]+=e*a[2],a[3]+=e*a[5],a[6]+=e*a[8],a[1]+=t*a[2],a[4]+=t*a[5],a[7]+=t*a[8],this}},{key:"equals",value:function(e){var t,a=this.elements,n=e.elements,l=!0;for(t=0;l&&9>t;++t)a[t]!==n[t]&&(l=!1);return l}}]),e}(),oe={XYZ:"XYZ",YZX:"YZX",ZXY:"ZXY",XZY:"XZY",YXZ:"YXZ",ZYX:"ZYX"},re=new K,se=function(){var a=Number.EPSILON;function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,y=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;t(this,e),this.x=a,this.y=n,this.z=l,this.w=y}return l(e,[{key:"set",value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.w=n,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"setFromEuler",value:function(e){var t=e.x,a=e.y,n=e.z,l=U,y=G,i=l(t/2),o=l(a/2),r=l(n/2),s=y(t/2),u=y(a/2),d=y(n/2);switch(e.order){case oe.XYZ:this.x=s*o*r+i*u*d,this.y=i*u*r-s*o*d,this.z=i*o*d+s*u*r,this.w=i*o*r-s*u*d;break;case oe.YXZ:this.x=s*o*r+i*u*d,this.y=i*u*r-s*o*d,this.z=i*o*d-s*u*r,this.w=i*o*r+s*u*d;break;case oe.ZXY:this.x=s*o*r-i*u*d,this.y=i*u*r+s*o*d,this.z=i*o*d+s*u*r,this.w=i*o*r-s*u*d;break;case oe.ZYX:this.x=s*o*r-i*u*d,this.y=i*u*r+s*o*d,this.z=i*o*d-s*u*r,this.w=i*o*r+s*u*d;break;case oe.YZX:this.x=s*o*r+i*u*d,this.y=i*u*r+s*o*d,this.z=i*o*d-s*u*r,this.w=i*o*r-s*u*d;break;case oe.XZY:this.x=s*o*r-i*u*d,this.y=i*u*r-s*o*d,this.z=i*o*d+s*u*r,this.w=i*o*r+s*u*d;}return this}},{key:"setFromAxisAngle",value:function(e,t){var a=t/2,n=G(a);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=U(a),this}},{key:"setFromRotationMatrix",value:function(e){var t,a=e.elements,n=a[0],l=a[4],y=a[8],i=a[1],o=a[5],r=a[9],u=a[2],d=a[6],c=a[10],x=n+o+c;return 0<x?(t=.5/N(x+1),this.w=.25/t,this.x=(d-r)*t,this.y=(y-u)*t,this.z=(i-l)*t):n>o&&n>c?(t=2*N(1+n-o-c),this.w=(d-r)/t,this.x=.25*t,this.y=(l+i)/t,this.z=(y+u)/t):o>c?(t=2*N(1+o-n-c),this.w=(y-u)/t,this.x=(l+i)/t,this.y=.25*t,this.z=(r+d)/t):(t=2*N(1+c-n-o),this.w=(i-l)/t,this.x=(y+u)/t,this.y=(r+d)/t,this.z=.25*t),this}},{key:"setFromUnitVectors",value:function(e,t){var a=e.dot(t)+1;return 1e-6>a?(a=0,Q(e.x)>Q(e.z)?re.set(-e.y,e.x,0):re.set(0,-e.z,e.y)):re.crossVectors(e,t),this.x=re.x,this.y=re.y,this.z=re.z,this.w=a,this.normalize()}},{key:"angleTo",value:function(e){return 2*I(Q(J(H(this.dot(e),-1),1)))}},{key:"rotateTowards",value:function(e,t){var a=this.angleTo(e);return 0!==a&&this.slerp(e,J(1,t/a)),this}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return N(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"normalize",value:function(){var e,t=this.length();return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/t,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"multiplyQuaternions",value:function(e,t){var a=e.x,n=e.y,l=e.z,y=e.w,i=t.x,o=t.y,r=t.z,s=t.w;return this.x=a*s+y*i+n*r-l*o,this.y=n*s+y*o+l*i-a*r,this.z=l*s+y*r+a*o-n*i,this.w=y*s-a*i-n*o-l*r,this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"slerp",value:function(e,n){var t,l,i,o,r,u,d,c=this.x,x=this.y,y=this.z,m=this.w;return 1===n?this.copy(e):0<n&&(t=m*e.w+c*e.x+x*e.y+y*e.z,0>t?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,t=-t):this.copy(e),1<=t?(this.w=m,this.x=c,this.y=x,this.z=y):(l=1-t*t,r=1-n,l<=a?(this.w=r*m+n*this.w,this.x=r*c+n*this.x,this.y=r*x+n*this.y,this.z=r*y+n*this.z,this.normalize()):(i=N(l),o=D(i,t),u=G(r*o)/i,d=G(n*o)/i,this.w=m*u+this.w*d,this.x=c*u+this.x*d,this.y=x*u+this.y*d,this.z=y*u+this.z*d))),this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}}],[{key:"slerp",value:function(e,a,n,l){return n.copy(e).slerp(a,l)}},{key:"slerpFlat",value:function(e,n,l,y,i,o,r){var u,d,c,x,m,k,v,p,z=i[o],g=i[o+1],h=i[o+2],S=i[o+3],w=l[y],P=l[y+1],b=l[y+2],q=l[y+3];(q!==S||w!==z||P!==g||b!==h)&&(u=1-r,x=w*z+P*g+b*h+q*S,k=0<=x?1:-1,m=1-x*x,m>a&&(c=N(m),v=D(c,x*k),u=G(u*v)/c,r=G(r*v)/c),p=r*k,w=w*u+z*p,P=P*u+g*p,b=b*u+h*p,q=q*u+S*p,u===1-r&&(d=1/N(w*w+P*P+b*b+q*q),w*=d,P*=d,b*=d,q*=d)),e[n]=w,e[n+1]=P,e[n+2]=b,e[n+3]=q}}]),e}(),ue=new ie,m=new se,q=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;t(this,e),this.x=a,this.y=n,this.z=l,this.order=e.defaultOrder}return l(e,[{key:"set",value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.order=n,this}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.order=t.order,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.order)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.order=e[t+3],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.order,e}},{key:"toVector3",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K;return e.set(this.x,this.y,this.z)}},{key:"setFromRotationMatrix",value:function(e){var t=Math.asin,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.order,n=e.elements,l=n[0],y=n[4],i=n[8],o=n[1],r=n[5],s=n[9],u=n[2],d=n[6],c=n[10],x=1-1e-5;switch(a){case oe.XYZ:{this.y=t(w(i,-1,1)),Q(i)<x?(this.x=D(-s,c),this.z=D(-y,l)):(this.x=D(d,r),this.z=0);break}case oe.YXZ:{this.x=t(-w(s,-1,1)),Q(s)<x?(this.y=D(i,c),this.z=D(o,r)):(this.y=D(-u,l),this.z=0);break}case oe.ZXY:{this.x=t(w(d,-1,1)),Q(d)<x?(this.y=D(-u,c),this.z=D(-y,r)):(this.y=0,this.z=D(o,l));break}case oe.ZYX:{this.y=t(-w(u,-1,1)),Q(u)<x?(this.x=D(d,c),this.z=D(o,l)):(this.x=0,this.z=D(-y,r));break}case oe.YZX:{this.z=t(w(o,-1,1)),Q(o)<x?(this.x=D(-s,r),this.y=D(-u,l)):(this.x=0,this.y=D(i,c));break}case oe.XZY:{this.z=t(-w(y,-1,1)),Q(y)<x?(this.x=D(d,r),this.y=D(i,l)):(this.x=D(-s,c),this.y=0);break}}return this.order=a,this}},{key:"setFromQuaternion",value:function(e,t){return ue.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ue,t)}},{key:"setFromVector3",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return m.setFromEuler(this),this.setFromQuaternion(m,e)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.order===this.order}}],[{key:"defaultOrder",get:function(){return oe.XYZ}}]),e}(),de=new K,a=new K,b=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K(1,0,0),n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;t(this,e),this.normal=a,this.constant=n}return l(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,a,n){return this.normal.set(e,t,a),this.constant=n,this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var l=de.subVectors(n,t).cross(a.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(l,de),this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.normal.negate(),this.constant=-this.constant,this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"intersectLine",value:function(e,a){var n=e.delta(de),l=this.normal.dot(n);if(0===l)0===this.distanceToPoint(e.start)&&a.copy(e.start);else{var y=-(e.start.dot(this.normal)+this.constant)/l;0<=y&&1>=y&&a.copy(n).multiplyScalar(y).add(e.start)}return a}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),a=this.distanceToPoint(e.end);return 0>t&&0<a||0>a&&0<t}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}]),e}(),ce=new K,xe=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new b,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new b,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new b,y=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new b,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:new b,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:new b;t(this,e),this.planes=[a,n,l,y,i,o]}return l(e,[{key:"set",value:function(e,t,a,n,l,y){var i=this.planes;return i[0].copy(e),i[1].copy(t),i[2].copy(a),i[3].copy(n),i[4].copy(l),i[5].copy(y),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){var t,a=this.planes;for(t=0;6>t;++t)a[t].copy(e.planes[t]);return this}},{key:"setFromMatrix",value:function(e){var t=this.planes,a=e.elements,n=a[0],l=a[1],y=a[2],i=a[3],o=a[4],r=a[5],s=a[6],u=a[7],d=a[8],c=a[9],x=a[10],m=a[11],k=a[12],v=a[13],p=a[14],z=a[15];return t[0].setComponents(i-n,u-o,m-d,z-k).normalize(),t[1].setComponents(i+n,u+o,m+d,z+k).normalize(),t[2].setComponents(i+l,u+r,m+c,z+v).normalize(),t[3].setComponents(i-l,u-r,m-c,z-v).normalize(),t[4].setComponents(i-y,u-s,m-x,z-p).normalize(),t[5].setComponents(i+y,u+s,m+x,z+p).normalize(),this}},{key:"intersectsSphere",value:function(e){var t,a,n=this.planes,l=e.center,y=-e.radius,o=!0;for(t=0;6>t;++t)if(a=n[t].distanceToPoint(l),a<y){o=!1;break}return o}},{key:"intersectsBox",value:function(e){var t,a,n=this.planes,l=e.min,y=e.max;for(t=0;6>t;++t)if(a=n[t],ce.x=0<a.normal.x?y.x:l.x,ce.y=0<a.normal.y?y.y:l.y,ce.z=0<a.normal.z?y.z:l.z,0>a.distanceToPoint(ce))return!1;return!0}},{key:"containsPoint",value:function(e){var t,a=this.planes,n=!0;for(t=0;6>t;++t)if(0>a[t].distanceToPoint(e)){n=!1;break}return n}}]),e}(),me=new K,ke=new K,ve=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new K;t(this,e),this.start=a,this.end=n}return l(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"getCenter",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K;return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K;return e.subVectors(this.end,this.start)}},{key:"lengthSquared",value:function(){return this.start.distanceToSquared(this.end)}},{key:"length",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,a){me.subVectors(e,this.start),ke.subVectors(this.end,this.start);var n=ke.dot(ke),l=ke.dot(me),y=a?J(H(l/n,0),1):l/n;return y}},{key:"closestPointToPoint",value:function(e){var a=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new K,l=this.closestPointToPointParameter(e,a);return this.delta(n).multiplyScalar(l).add(this.start)}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}]),e}(),pe=new K,ze=new K,ge=new K,c=function(){function e(){t(this,e),this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return l(e,[{key:"set",value:function(e,t,a,n,l,y,i,o,r,s,u,d,c,x,m,k){var v=this.elements;return v[0]=e,v[4]=t,v[8]=a,v[12]=n,v[1]=l,v[5]=y,v[9]=i,v[13]=o,v[2]=r,v[6]=s,v[10]=u,v[14]=d,v[3]=c,v[7]=x,v[11]=m,v[15]=k,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"copy",value:function(e){var t=e.elements,a=this.elements;return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],this}},{key:"clone",value:function(){return new this.constructor().fromArray(this.elements)}},{key:"fromArray",value:function(e){var t,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;for(t=0;16>t;++t)n[t]=e[t+a];return this}},{key:"toArray",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;for(e=0;16>e;++e)t[e+a]=n[e];return t}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return N(H(t,a,n))}},{key:"copyPosition",value:function(e){var t=this.elements,a=e.elements;return t[12]=a[12],t[13]=a[13],t[14]=a[14],this}},{key:"setPosition",value:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this}},{key:"extractBasis",value:function(e,t,a){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,a){return this.set(e.x,t.x,a.x,0,e.y,t.y,a.y,0,e.z,t.z,a.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,a=e.elements,n=1/pe.setFromMatrixColumn(e,0).length(),l=1/pe.setFromMatrixColumn(e,1).length(),y=1/pe.setFromMatrixColumn(e,2).length();return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=0,t[4]=a[4]*l,t[5]=a[5]*l,t[6]=a[6]*l,t[7]=0,t[8]=a[8]*y,t[9]=a[9]*y,t[10]=a[10]*y,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){var n,l,i,o,r,s,u,m,k,v,p,g,h=this.elements,S=t.x,x=t.y,y=t.z,z=U(S),a=G(S),w=U(x),c=G(x),d=U(y),e=G(y);switch(t.order){case oe.XYZ:{n=z*d,l=z*e,i=a*d,o=a*e,h[0]=w*d,h[4]=-w*e,h[8]=c,h[1]=l+i*c,h[5]=n-o*c,h[9]=-a*w,h[2]=o-n*c,h[6]=i+l*c,h[10]=z*w;break}case oe.YXZ:{r=w*d,s=w*e,u=c*d,m=c*e,h[0]=r+m*a,h[4]=u*a-s,h[8]=z*c,h[1]=z*e,h[5]=z*d,h[9]=-a,h[2]=s*a-u,h[6]=m+r*a,h[10]=z*w;break}case oe.ZXY:{r=w*d,s=w*e,u=c*d,m=c*e,h[0]=r-m*a,h[4]=-z*e,h[8]=u+s*a,h[1]=s+u*a,h[5]=z*d,h[9]=m-r*a,h[2]=-z*c,h[6]=a,h[10]=z*w;break}case oe.ZYX:{n=z*d,l=z*e,i=a*d,o=a*e,h[0]=w*d,h[4]=i*c-l,h[8]=n*c+o,h[1]=w*e,h[5]=o*c+n,h[9]=l*c-i,h[2]=-c,h[6]=a*w,h[10]=z*w;break}case oe.YZX:{k=z*w,v=z*c,p=a*w,g=a*c,h[0]=w*d,h[4]=g-k*e,h[8]=p*e+v,h[1]=e,h[5]=z*d,h[9]=-a*d,h[2]=-c*d,h[6]=v*e+p,h[10]=k-g*e;break}case oe.XZY:{k=z*w,v=z*c,p=a*w,g=a*c,h[0]=w*d,h[4]=-e,h[8]=c*d,h[1]=k*e+g,h[5]=z*d,h[9]=v*e-p,h[2]=p*e-v,h[6]=a*d,h[10]=g*e+k;break}}return h[3]=0,h[7]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(pe.set(0,0,0),e,ze.set(1,1,1))}},{key:"lookAt",value:function(e,t,a){var n=this.elements,l=pe,i=ze,y=ge;return y.subVectors(e,t),0===y.lengthSquared()&&(y.z=1),y.normalize(),l.crossVectors(a,y),0===l.lengthSquared()&&(1===Q(a.z)?y.x+=1e-4:y.z+=1e-4,y.normalize(),l.crossVectors(a,y)),l.normalize(),i.crossVectors(y,l),n[0]=l.x,n[4]=i.x,n[8]=y.x,n[1]=l.y,n[5]=i.y,n[9]=y.y,n[2]=l.z,n[6]=i.z,n[10]=y.z,this}},{key:"multiplyMatrices",value:function(e,t){var a=this.elements,n=e.elements,l=t.elements,y=n[0],i=n[4],o=n[8],r=n[12],s=n[1],u=n[5],d=n[9],c=n[13],x=n[2],m=n[6],k=n[10],v=n[14],p=n[3],z=n[7],g=n[11],h=n[15],f=l[0],S=l[4],w=l[8],P=l[12],b=l[1],q=l[5],T=l[9],C=l[13],V=l[2],F=l[6],M=l[10],A=l[14],X=l[3],Y=l[7],Z=l[11],O=l[15];return a[0]=y*f+i*b+o*V+r*X,a[4]=y*S+i*q+o*F+r*Y,a[8]=y*w+i*T+o*M+r*Z,a[12]=y*P+i*C+o*A+r*O,a[1]=s*f+u*b+d*V+c*X,a[5]=s*S+u*q+d*F+c*Y,a[9]=s*w+u*T+d*M+c*Z,a[13]=s*P+u*C+d*A+c*O,a[2]=x*f+m*b+k*V+v*X,a[6]=x*S+m*q+k*F+v*Y,a[10]=x*w+m*T+k*M+v*Z,a[14]=x*P+m*C+k*A+v*O,a[3]=p*f+z*b+g*V+h*X,a[7]=p*S+z*q+g*F+h*Y,a[11]=p*w+z*T+g*M+h*Z,a[15]=p*P+z*C+g*A+h*O,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],a=e[4],n=e[8],l=e[12],y=e[1],i=e[5],o=e[9],r=e[13],s=e[2],u=e[6],d=e[10],c=e[14],x=e[3],m=e[7],k=e[11],v=e[15],p=t*i,z=t*o,g=t*r,h=a*y,f=a*o,S=a*r,w=n*y,P=n*i,b=n*r,q=l*y,T=l*i,C=l*o;return x*(C*u-b*u-T*d+S*d+P*c-f*c)+m*(z*c-g*d+q*d-w*c+b*s-C*s)+k*(g*u-p*c-q*u+h*c+T*s-S*s)+v*(-P*s-z*u+p*d+w*u-h*d+f*s)}},{key:"getInverse",value:function(e){var t,a=this.elements,n=e.elements,l=n[0],y=n[1],i=n[2],o=n[3],r=n[4],s=n[5],u=n[6],d=n[7],c=n[8],x=n[9],m=n[10],k=n[11],v=n[12],p=n[13],z=n[14],g=n[15],h=x*z*d-p*m*d+p*u*k-s*z*k-x*u*g+s*m*g,f=v*m*d-c*z*d-v*u*k+r*z*k+c*u*g-r*m*g,S=c*p*d-v*x*d+v*s*k-r*p*k-c*s*g+r*x*g,w=v*x*u-c*p*u-v*s*m+r*p*m+c*s*z-r*x*z,P=l*h+y*f+i*S+o*w;return 0===P?(console.error("Can't invert matrix, determinant is zero",e),this.identity()):(t=1/P,a[0]=h*t,a[1]=(p*m*o-x*z*o-p*i*k+y*z*k+x*i*g-y*m*g)*t,a[2]=(s*z*o-p*u*o+p*i*d-y*z*d-s*i*g+y*u*g)*t,a[3]=(x*u*o-s*m*o-x*i*d+y*m*d+s*i*k-y*u*k)*t,a[4]=f*t,a[5]=(c*z*o-v*m*o+v*i*k-l*z*k-c*i*g+l*m*g)*t,a[6]=(v*u*o-r*z*o-v*i*d+l*z*d+r*i*g-l*u*g)*t,a[7]=(r*m*o-c*u*o+c*i*d-l*m*d-r*i*k+l*u*k)*t,a[8]=S*t,a[9]=(v*x*o-c*p*o-v*y*k+l*p*k+c*y*g-l*x*g)*t,a[10]=(r*p*o-v*s*o+v*y*d-l*p*d-r*y*g+l*s*g)*t,a[11]=(c*s*o-r*x*o-c*y*d+l*x*d+r*y*k-l*s*k)*t,a[12]=w*t,a[13]=(c*p*i-v*x*i+v*y*m-l*p*m-c*y*z+l*x*z)*t,a[14]=(v*s*i-r*p*i-v*y*u+l*p*u+r*y*z-l*s*z)*t,a[15]=(r*x*i-c*s*i+c*y*u-l*x*u-r*y*m+l*s*m)*t),this}},{key:"transpose",value:function(){var e,a=this.elements;return e=a[1],a[1]=a[4],a[4]=e,e=a[2],a[2]=a[8],a[8]=e,e=a[6],a[6]=a[9],a[9]=e,e=a[3],a[3]=a[12],a[12]=e,e=a[7],a[7]=a[13],a[13]=e,e=a[11],a[11]=a[14],a[14]=e,this}},{key:"scale",value:function(e,t,a){var n=this.elements;return n[0]*=e,n[4]*=t,n[8]*=a,n[1]*=e,n[5]*=t,n[9]*=a,n[2]*=e,n[6]*=t,n[10]*=a,n[3]*=e,n[7]*=t,n[11]*=a,this}},{key:"makeScale",value:function(e,t,a){return this.set(e,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1),this}},{key:"makeTranslation",value:function(e,t,a){return this.set(1,0,0,e,0,1,0,t,0,0,1,a,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=U(e),a=G(e);return this.set(1,0,0,0,0,t,-a,0,0,a,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=U(e),a=G(e);return this.set(t,0,a,0,0,1,0,0,-a,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=U(e),a=G(e);return this.set(t,-a,0,0,a,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,a){var n=U(a),l=G(a),i=1-n,t=e.x,o=e.y,y=e.z,r=i*t,s=i*o;return this.set(r*t+n,r*o-l*y,r*y+l*o,0,r*o+l*y,s*o+n,s*y-l*t,0,r*y-l*o,s*y+l*t,i*y*y+n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,a){return this.set(1,t,a,0,e,1,a,0,e,t,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,a){var n=this.elements,l=t.x,i=t.y,y=t.z,o=t.w,r=l+l,s=i+i,u=y+y,d=l*r,c=l*s,x=l*u,m=i*s,k=i*u,v=y*u,p=o*r,z=o*s,g=o*u,h=a.x,f=a.y,S=a.z;return n[0]=(1-(m+v))*h,n[1]=(c+g)*h,n[2]=(x-z)*h,n[3]=0,n[4]=(c-g)*f,n[5]=(1-(d+v))*f,n[6]=(k+p)*f,n[7]=0,n[8]=(x+z)*S,n[9]=(k-p)*S,n[10]=(1-(d+m))*S,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}},{key:"decompose",value:function(e,t,a){var n=this.elements,l=n[0],y=n[1],i=n[2],o=n[4],r=n[5],s=n[6],u=n[8],d=n[9],c=n[10],x=this.determinant(),m=pe.set(l,y,i).length()*(0>x?-1:1),k=pe.set(o,r,s).length(),v=pe.set(u,d,c).length(),p=1/m,z=1/k,g=1/v;return e.x=n[12],e.y=n[13],e.z=n[14],n[0]*=p,n[1]*=p,n[2]*=p,n[4]*=z,n[5]*=z,n[6]*=z,n[8]*=g,n[9]*=g,n[10]*=g,t.setFromRotationMatrix(this),n[0]=l,n[1]=y,n[2]=i,n[4]=o,n[5]=r,n[6]=s,n[8]=u,n[9]=d,n[10]=c,a.x=m,a.y=k,a.z=v,this}},{key:"makePerspective",value:function(e,t,a,n,l,y){var i=this.elements;return i[0]=2*l/(t-e),i[4]=0,i[8]=(t+e)/(t-e),i[12]=0,i[1]=0,i[5]=2*l/(a-n),i[9]=(a+n)/(a-n),i[13]=0,i[2]=0,i[6]=0,i[10]=-(y+l)/(y-l),i[14]=-2*y*l/(y-l),i[3]=0,i[7]=0,i[11]=-1,i[15]=0,this}},{key:"makeOrthographic",value:function(e,t,a,n,l,y){var i=this.elements,o=1/(t-e),r=1/(a-n),s=1/(y-l);return i[0]=2*o,i[4]=0,i[8]=0,i[12]=-((t+e)*o),i[1]=0,i[5]=2*r,i[9]=0,i[13]=-((a+n)*r),i[2]=0,i[6]=0,i[10]=-2*s,i[14]=-((y+l)*s),i[3]=0,i[7]=0,i[11]=0,i[15]=1,this}},{key:"equals",value:function(e){var t,a=this.elements,n=e.elements,l=!0;for(t=0;l&&16>t;++t)a[t]!==n[t]&&(l=!1);return l}}]),e}(),he=[new K,new K,new K,new K],fe=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new K;t(this,e),this.origin=a,this.direction=n}return l(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"at",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new K;return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,he[0])),this}},{key:"closestPointToPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new K,a=t.subVectors(e,this.origin).dot(this.direction);return 0<=a?t.copy(this.direction).multiplyScalar(a).add(this.origin):t.copy(this.origin)}},{key:"distanceSquaredToPoint",value:function(e){var t=he[0].subVectors(e,this.origin).dot(this.direction);return 0>t?this.origin.distanceToSquared(e):he[0].copy(this.direction).multiplyScalar(t).add(this.origin).distanceToSquared(e)}},{key:"distanceToPoint",value:function(e){return N(this.distanceSquaredToPoint(e))}},{key:"distanceToPlane",value:function(e){var a=e.normal.dot(this.direction),n=0===a?0===e.distanceToPoint(this.origin)?0:-1:-(this.origin.dot(e.normal)+e.constant)/a;return 0<=n?n:null}},{key:"distanceSquaredToSegment",value:function(e,t,a,n){var l,y,i,o,r,s=he[0].copy(e).add(t).multiplyScalar(.5),u=he[1].copy(t).sub(e).normalize(),d=he[2].copy(this.origin).sub(s),x=.5*e.distanceTo(t),m=-this.direction.dot(u),k=d.dot(this.direction),v=-d.dot(u),p=d.lengthSq(),c=Q(1-m*m);return 0<c?(l=m*v-k,y=m*k-v,i=x*c,0<=l?y>=-i?y<=i?(o=1/c,l*=o,y*=o,r=l*(l+m*y+2*k)+y*(m*l+y+2*v)+p):(y=x,l=H(0,-(m*y+k)),r=-l*l+y*(y+2*v)+p):(y=-x,l=H(0,-(m*y+k)),r=-l*l+y*(y+2*v)+p):y<=-i?(l=H(0,-(-m*x+k)),y=0<l?-x:J(H(-x,-v),x),r=-l*l+y*(y+2*v)+p):y<=i?(l=0,y=J(H(-x,-v),x),r=y*(y+2*v)+p):(l=H(0,-(m*x+k)),y=0<l?x:J(H(-x,-v),x),r=-l*l+y*(y+2*v)+p)):(y=0<m?-x:x,l=H(0,-(m*y+k)),r=-l*l+y*(y+2*v)+p),void 0!==a&&a.copy(this.direction).multiplyScalar(l).add(this.origin),void 0!==n&&n.copy(u).multiplyScalar(y).add(s),r}},{key:"intersectSphere",value:function(e){var t,a,n,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new K,y=he[0].subVectors(e.center,this.origin),i=y.dot(this.direction),o=y.dot(y)-i*i,r=e.radius*e.radius,s=null;return o<=r&&(t=N(r-o),a=i-t,n=i+t,(0<=a||0<=n)&&(s=0>a?this.at(n,l):this.at(a,l))),s}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"intersectPlane",value:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new K,n=this.distanceToPlane(e);return null===n?null:this.at(n,a)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t}},{key:"intersectBox",value:function(e){var t,a,n,l,y,i,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new K,r=this.origin,s=this.direction,u=e.min,d=e.max,c=1/s.x,x=1/s.y,m=1/s.z,k=null;return 0<=c?(t=(u.x-r.x)*c,a=(d.x-r.x)*c):(t=(d.x-r.x)*c,a=(u.x-r.x)*c),0<=x?(n=(u.y-r.y)*x,l=(d.y-r.y)*x):(n=(d.y-r.y)*x,l=(u.y-r.y)*x),t<=l&&n<=a&&((n>t||t!==t)&&(t=n),(l<a||a!==a)&&(a=l),0<=m?(y=(u.z-r.z)*m,i=(d.z-r.z)*m):(y=(d.z-r.z)*m,i=(u.z-r.z)*m),t<=i&&y<=a&&((y>t||t!==t)&&(t=y),(i<a||a!==a)&&(a=i),0<=a&&(k=this.at(0<=t?t:a,o)))),k}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,he[0])}},{key:"intersectTriangle",value:function(e,t,a,n,l){var y,i,o,r,s,u=this.direction,d=he[0],c=he[1],x=he[2],m=he[3],k=null;return c.subVectors(t,e),x.subVectors(a,e),m.crossVectors(c,x),y=u.dot(m),0===y||n&&0<y||(0<y?i=1:(i=-1,y=-y),d.subVectors(this.origin,e),o=i*u.dot(x.crossVectors(d,x)),0<=o&&(r=i*u.dot(c.cross(d)),0<=r&&o+r<=y&&(s=-i*d.dot(m),0<=s&&(k=this.at(s/y,l))))),k}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}]),e}(),Se=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;t(this,e),this.radius=a,this.phi=n,this.theta=l}return l(e,[{key:"set",value:function(e,t,a){return this.radius=e,this.phi=t,this.theta=a,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"makeSafe",value:function(){return this.phi=H(1e-6,J(R-1e-6,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,a){return this.radius=N(e*e+t*t+a*a),0===this.radius?(this.theta=0,this.phi=0):(this.theta=D(e,a),this.phi=I(J(H(t/this.radius,-1),1))),this}}]),e}(),we=function(){function e(){t(this,e),this.elements=new Float32Array([1,0,0,1,0,1])}return l(e,[{key:"set",value:function(t,a,n,l,y,i){var o=this.elements;return o[0]=t,o[1]=a,o[3]=l,o[2]=n,o[4]=y,o[5]=i,this}},{key:"identity",value:function(){return this.set(1,0,0,1,0,1),this}},{key:"copy",value:function(e){var t=e.elements;return this.set(t[0],t[1],t[2],t[3],t[4],t[5]),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"toMatrix3",value:function(e){var t=e.elements;e.set(t[0],t[1],t[2],t[1],t[3],t[4],t[2],t[4],t[5])}},{key:"add",value:function(e){var t=this.elements,a=e.elements;return t[0]+=a[0],t[1]+=a[1],t[3]+=a[3],t[2]+=a[2],t[4]+=a[4],t[5]+=a[5],this}},{key:"norm",value:function(){var t=this.elements,e=t[1]*t[1],a=t[2]*t[2],n=t[4]*t[4];return N(t[0]*t[0]+e+a+e+t[3]*t[3]+n+a+n+t[5]*t[5])}},{key:"off",value:function(){var t=this.elements;return N(2*(t[1]*t[1]+t[2]*t[2]+t[4]*t[4]))}},{key:"applyToVector3",value:function(t){var a=t.x,n=t.y,l=t.z,y=this.elements;return t.x=y[0]*a+y[1]*n+y[2]*l,t.y=y[1]*a+y[3]*n+y[4]*l,t.z=y[2]*a+y[4]*n+y[5]*l,t}},{key:"equals",value:function(e){var t,a=this.elements,n=e.elements,l=!0;for(t=0;l&&6>t;++t)a[t]!==n[t]&&(l=!1);return l}}],[{key:"calculateIndex",value:function(e,t){return 3-(3-e)*(2-e)/2+t}}]),e}(),Pe=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,y=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;t(this,e),this.x=a,this.y=n,this.z=l,this.w=y}return l(e,[{key:"set",value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.w=n,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*I(e.w);var t=N(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,a,n,l,i,o,r,u,d,c,m,k=.01,v=.1,p=e.elements,g=p[0],h=p[4],f=p[8],S=p[1],w=p[5],P=p[9],b=p[2],q=p[6],T=p[10];return Q(h-S)<k&&Q(f-b)<k&&Q(P-q)<k?Q(h+S)<v&&Q(f+b)<v&&Q(P+q)<v&&Q(g+w+T-3)<v?this.set(1,0,0,0):(t=R,i=(g+1)/2,o=(w+1)/2,r=(T+1)/2,u=(h+S)/4,d=(f+b)/4,c=(P+q)/4,i>o&&i>r?i<k?(a=0,n=.707106781,l=.707106781):(a=N(i),n=u/a,l=d/a):o>r?o<k?(a=.707106781,n=0,l=.707106781):(n=N(o),a=u/n,l=c/n):r<k?(a=.707106781,n=.707106781,l=0):(l=N(r),a=d/l,n=c/l),this.set(a,n,l,t)):(m=N((q-P)*(q-P)+(f-b)*(f-b)+(S-h)*(S-h)),.001>Q(m)&&(m=1),this.x=(q-P)/m,this.y=(f-b)/m,this.z=(S-h)/m,this.w=I((g+w+T-1)/2)),this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this.w=e.w*t.w,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}},{key:"divideScalar",value:function(e){return this.x/=e,this.y/=e,this.z/=e,this.w/=e,this}},{key:"applyMatrix4",value:function(t){var a=this.x,n=this.y,l=this.z,y=this.w,i=t.elements;return this.x=i[0]*a+i[4]*n+i[8]*l+i[12]*y,this.y=i[1]*a+i[5]*n+i[9]*l+i[13]*y,this.z=i[2]*a+i[6]*n+i[10]*l+i[14]*y,this.w=i[3]*a+i[7]*n+i[11]*l+i[15]*y,this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"manhattanLength",value:function(){return Q(this.x)+Q(this.y)+Q(this.z)+Q(this.w)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return N(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanDistanceTo",value:function(e){return Q(this.x-e.x)+Q(this.y-e.y)+Q(this.z-e.z)+Q(this.w-e.w)}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,a=this.y-e.y,n=this.z-e.z,l=this.w-e.w;return t*t+a*a+n*n+l*l}},{key:"distanceTo",value:function(e){return N(this.distanceToSquared(e))}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"min",value:function(e){return this.x=J(this.x,e.x),this.y=J(this.y,e.y),this.z=J(this.z,e.z),this.w=J(this.w,e.w),this}},{key:"max",value:function(e){return this.x=H(this.x,e.x),this.y=H(this.y,e.y),this.z=H(this.z,e.z),this.w=H(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=H(e.x,J(t.x,this.x)),this.y=H(e.y,J(t.y,this.y)),this.z=H(e.z,J(t.z,this.z)),this.w=H(e.w,J(t.w,this.w)),this}},{key:"floor",value:function(){return this.x=_(this.x),this.y=_(this.y),this.z=_(this.z),this.w=_(this.w),this}},{key:"ceil",value:function(){return this.x=L(this.x),this.y=L(this.y),this.z=L(this.z),this.w=L(this.w),this}},{key:"round",value:function(){return this.x=j(this.x),this.y=j(this.y),this.z=j(this.z),this.w=j(this.w),this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}}]),e}(),be=new K,qe=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new K;t(this,e),this.min=a,this.max=n,this.children=null}return l(e,[{key:"getCenter",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K;return e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getDimensions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K;return e.subVectors(this.max,this.min)}},{key:"split",value:function(){var e,t,a=this.min,n=this.max,l=this.getCenter(be),y=this.children=[null,null,null,null,null,null,null,null];for(e=0;8>e;++e)t=Te[e],y[e]=new this.constructor(new K(0===t[0]?a.x:l.x,0===t[1]?a.y:l.y,0===t[2]?a.z:l.z),new K(0===t[0]?l.x:n.x,0===t[1]?l.y:n.y,0===t[2]?l.z:n.z))}}]),e}(),Te=[new Uint8Array([0,0,0]),new Uint8Array([0,0,1]),new Uint8Array([0,1,0]),new Uint8Array([0,1,1]),new Uint8Array([1,0,0]),new Uint8Array([1,0,1]),new Uint8Array([1,1,0]),new Uint8Array([1,1,1])],Ce=[new Uint8Array([0,4]),new Uint8Array([1,5]),new Uint8Array([2,6]),new Uint8Array([3,7]),new Uint8Array([0,2]),new Uint8Array([1,3]),new Uint8Array([4,6]),new Uint8Array([5,7]),new Uint8Array([0,1]),new Uint8Array([2,3]),new Uint8Array([4,5]),new Uint8Array([6,7])],Ve=new K,Fe=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;t(this,e),this.min=a,this.size=n,this.children=null}return l(e,[{key:"getCenter",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K;return e.copy(this.min).addScalar(.5*this.size)}},{key:"getDimensions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new K;return e.set(this.size,this.size,this.size)}},{key:"split",value:function(){var e,t,a=this.min,n=this.getCenter(Ve),l=.5*this.size,y=this.children=[null,null,null,null,null,null,null,null];for(e=0;8>e;++e)t=Te[e],y[e]=new this.constructor(new K(0===t[0]?a.x:n.x,0===t[1]?a.y:n.y,0===t[2]?a.z:n.z),l)}},{key:"max",get:function(){return this.min.clone().addScalar(this.size)}}]),e}(),Me=function(){function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];t(this,e),this.value=a,this.done=n}return l(e,[{key:"reset",value:function(){this.value=null,this.done=!1}}]),e}(),Ae=new v,Xe=function(){function e(a){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;t(this,e),this.octree=a,this.region=n,this.cull=null!==n,this.result=new Me,this.trace=null,this.indices=null,this.reset()}return l(e,[{key:"reset",value:function(){var e=this.octree.root;return this.trace=[],this.indices=[],null!==e&&(Ae.min=e.min,Ae.max=e.max,(!this.cull||this.region.intersectsBox(Ae))&&(this.trace.push(e),this.indices.push(0))),this.result.reset(),this}},{key:"next",value:function(){for(var e,t,a,n=this.cull,l=this.region,y=this.indices,i=this.trace,o=null,r=i.length-1;null===o&&0<=r;)if(e=y[r]++,t=i[r].children,!(8>e))i.pop(),y.pop(),--r;else if(null!==t){if(a=t[e],n&&(Ae.min=a.min,Ae.max=a.max,!l.intersectsBox(Ae)))continue;i.push(a),y.push(0),++r}else o=i.pop(),y.pop();return this.result.value=o,this.result.done=null===o,this.result}},{key:"return",value:function(e){return this.result.value=e,this.result.done=!0,this.result}},{key:Symbol.iterator,value:function(){return this}}]),e}(),Ye=[new K,new K,new K],Ze=new v,Oe=new fe,r=[new Uint8Array([4,2,1]),new Uint8Array([5,3,8]),new Uint8Array([6,8,3]),new Uint8Array([7,8,8]),new Uint8Array([8,6,5]),new Uint8Array([8,7,8]),new Uint8Array([8,8,7]),new Uint8Array([8,8,8])],Be=0,Ee=function(){function e(){t(this,e)}return l(e,null,[{key:"intersectOctree",value:function(e,t,a){var n,l,y,i,o,r,s,u,d,c=Ze.min.set(0,0,0),x=Ze.max.subVectors(e.max,e.min),m=e.getDimensions(Ye[0]),k=Ye[1].copy(m).multiplyScalar(.5),v=Oe.origin.copy(t.ray.origin),p=Oe.direction.copy(t.ray.direction);v.sub(e.getCenter(Ye[2])).add(k),Be=0,0>p.x&&(v.x=m.x-v.x,p.x=-p.x,Be|=4),0>p.y&&(v.y=m.y-v.y,p.y=-p.y,Be|=2),0>p.z&&(v.z=m.z-v.z,p.z=-p.z,Be|=1),n=1/p.x,l=1/p.y,y=1/p.z,i=(c.x-v.x)*n,o=(x.x-v.x)*n,r=(c.y-v.y)*l,s=(x.y-v.y)*l,u=(c.z-v.z)*y,d=(x.z-v.z)*y,H(H(i,r),u)<J(J(o,s),d)&&C(e.root,i,r,u,o,s,d,t,a)}}]),e}(),Re=new v,De=function(){function e(a,n){t(this,e),this.root=void 0!==a&&void 0!==n?new qe(a,n):null}return l(e,[{key:"getCenter",value:function(e){return this.root.getCenter(e)}},{key:"getDimensions",value:function(e){return this.root.getDimensions(e)}},{key:"getDepth",value:function(){return V(this.root)}},{key:"cull",value:function(e){var t=[];return F(this.root,e,t),t}},{key:"findOctantsByLevel",value:function(e){var t=[];return M(this.root,e,0,t),t}},{key:"raycast",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return Ee.intersectOctree(this,e,t),t}},{key:"leaves",value:function(e){return new Xe(this,e)}},{key:Symbol.iterator,value:function(){return new Xe(this)}},{key:"min",get:function(){return this.root.min}},{key:"max",get:function(){return this.root.max}},{key:"children",get:function(){return this.root.children}}]),e}(),je=new K,p=function(e){function a(e,n){var l;return t(this,a),l=x(this,i(a).call(this,e,n)),l.points=null,l.data=null,l}return y(a,e),l(a,[{key:"distanceToSquared",value:function(e){var t=je.copy(e).clamp(this.min,this.max);return t.sub(e).lengthSquared()}},{key:"distanceToCenterSquared",value:function(e){var t=this.getCenter(je),a=e.x-t.x,n=e.y-t.x,l=e.z-t.z;return a*a+n*n+l*l}},{key:"contains",value:function(e,t){var a=this.min,n=this.max;return e.x>=a.x-t&&e.y>=a.y-t&&e.z>=a.z-t&&e.x<=n.x+t&&e.y<=n.y+t&&e.z<=n.z+t}},{key:"redistribute",value:function(e){var t,a,n,l,y,o,r,s=this.children,u=this.points,d=this.data;if(null!==s&&null!==u)for(t=0,n=u.length;t<n;++t)for(o=u[t],r=d[t],(a=0,l=s.length);a<l;++a)if(y=s[a],y.contains(o,e)){null===y.points&&(y.points=[],y.data=[]),y.points.push(o),y.data.push(r);break}this.points=null,this.data=null}},{key:"merge",value:function(){var e,t,a,n=this.children;if(null!==n){for(this.points=[],this.data=[],(e=0,t=n.length);e<t;++e)if(a=n[e],null!==a.points){var y,o;(y=this.points).push.apply(y,g(a.points)),(o=this.data).push.apply(o,g(a.data))}this.children=null}}}]),a}(qe),Le=function e(a,n,l){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;t(this,e),this.distance=a,this.distanceToRay=n,this.point=l,this.object=y},_e=function(e){function a(e,n){var l,y=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:8,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:8;return t(this,a),l=x(this,i(a).call(this)),l.root=new p(e,n),l.bias=H(0,y),l.maxPoints=H(1,j(o)),l.maxDepth=H(0,j(r)),l.pointCount=0,l}return y(a,e),l(a,[{key:"countPoints",value:function(e){return A(e)}},{key:"put",value:function(e,t){return X(e,t,this,this.root,0)}},{key:"remove",value:function(e){return Y(e,this,this.root,null)}},{key:"fetch",value:function(e){return Z(e,this,this.root)}},{key:"move",value:function(e,t){return O(e,t,this,this.root,null,0)}},{key:"findNearestPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],n=B(e,t,a,this.root);return null!==n&&(n.point=n.point.clone()),n}},{key:"findPoints",value:function(e,t){var a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],n=[];return E(e,t,a,this.root,n),n}},{key:"raycast",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=z(i(a.prototype),"raycast",this).call(this,e);return 0<n.length&&this.testPoints(n,e,t),t}},{key:"testPoints",value:function(e,t,a){var n,l,y,o,r,s,u,d,c,x,m,k=t.params.Points.threshold;for(r=0,u=e.length;r<u;++r)if(c=e[r],x=c.points,null!==x)for(s=0,d=x.length;s<d;++s)m=x[s],o=t.ray.distanceSqToPoint(m),o<k*k&&(n=t.ray.closestPointToPoint(m,new K),l=t.ray.origin.distanceTo(n),l>=t.near&&l<=t.far&&(y=N(o),a.push(new Le(l,y,n,c.data[s]))))}}]),a}(De),Qe=new v,Ie=new K,Ne=new K,u=new K,Ue=function(){function e(){t(this,e)}return l(e,null,[{key:"recycleOctants",value:function(e,t){var a,n,y,o,r=e.min,s=e.getCenter(Ne),d=e.getDimensions(u).multiplyScalar(.5),c=e.children,x=t.length;for(a=0;8>a;++a)for(y=Te[a],Qe.min.addVectors(r,Ie.fromArray(y).multiply(d)),Qe.max.addVectors(s,Ie.fromArray(y).multiply(d)),n=0;n<x;++n)if(o=t[n],null!==o&&Qe.min.equals(o.min)&&Qe.max.equals(o.max)){c[a]=o,t[n]=null;break}}}]),e}();e.CubicOctant=Fe,e.edges=Ce,e.Octant=qe,e.Octree=De,e.OctantIterator=Xe,e.OctreeRaycaster=Ee,e.pattern=Te,e.PointOctant=p,e.PointOctree=_e,e.RayPointIntersection=Le,e.OctreeUtils=Ue,Object.defineProperty(e,"__esModule",{value:!0})});
